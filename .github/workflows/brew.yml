name: Test homebrew bottles
on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 * * 0"

jobs:
  brew:
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        os:
          - ubuntu-latest
          - macos-14
          - macos-15
          - macos-26
    steps:
      - name: Set up Homebrew
        id: set-up-homebrew
        uses: Homebrew/actions/setup-homebrew@main

      - name: Install Macaulay2
        run: brew install Macaulay2/tap/M2

      - name: Test Macaulay2 installation
        run: |
          M2 --check 1
          M2 --check 2
          M2 --check 3
